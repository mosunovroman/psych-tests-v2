# –ü—Ä–æ–º–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è "–¢–µ–ª–æ –∏ –†–∞–∑—É–º"

## –ó–∞–¥–∞—á–∞
–°–æ–∑–¥–∞–π Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ React Native (Expo) —Å —Ç–µ–º –∂–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º, —á—Ç–æ –∏ –≤–µ–±-—Å–∞–π—Ç teloirazum.ru. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ APK –¥–ª—è Android.

---

## –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ

### –ù–∞–∑–≤–∞–Ω–∏–µ –∏ –±—Ä–µ–Ω–¥–∏–Ω–≥
- **–ù–∞–∑–≤–∞–Ω–∏–µ**: –¢–µ–ª–æ –∏ –†–∞–∑—É–º
- **Package name**: `ru.teloirazum.app`
- **–¶–≤–µ—Ç–∞**:
  - Primary: #4a6fa5 (—Å–∏–Ω–∏–π)
  - –¢–µ–ª–æ: #22c55e (–∑–µ–ª—ë–Ω—ã–π)
  - –†–∞–∑—É–º: #3b82f6 (—Å–∏–Ω–∏–π)
  - –ü—Ä–∞–∫—Ç–∏–∫–∏: #a855f7 (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)
- **–ò–∫–æ–Ω–∫–∞**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–º–æ–¥–∑–∏ ‚ú® –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å SVG

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ù–∞–≤–∏–≥–∞—Ü–∏—è (Bottom Tabs)
```
[ü•ó –¢–µ–ª–æ] [üß† –†–∞–∑—É–º] [üåü –ü—Ä–∞–∫—Ç–∏–∫–∏] [üë§ –ü—Ä–æ—Ñ–∏–ª—å]
```

### –≠–∫—Ä–∞–Ω—ã

#### 1. –¢–µ–ª–æ (Nutrition)
- **NutritionHome** ‚Äî —Ö–∞–± —Ä–∞–∑–¥–µ–ª–∞ —Å 3 –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
- **KBJUCalculator** ‚Äî –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ö–ë–ñ–£
  - –ü–æ–ª—è: –ø–æ–ª, –≤–æ–∑—Ä–∞—Å—Ç, —Ä–æ—Å—Ç, –≤–µ—Å, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, —Ü–µ–ª—å
  - –§–æ—Ä–º—É–ª–∞ Mifflin-St Jeor
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ AsyncStorage
- **FoodDiary** ‚Äî –¥–Ω–µ–≤–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è
  - –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π –ø–æ –¥–Ω—è–º
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ: —Ñ–æ—Ç–æ + –æ–ø–∏—Å–∞–Ω–∏–µ
  - AI-–∞–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ API
  - –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã –ö–ë–ñ–£ –∑–∞ –¥–µ–Ω—å
- **Recipes** ‚Äî –±–∞–∑–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤ (20-30 —à—Ç.)
  - –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
  - –ò–∑–±—Ä–∞–Ω–Ω–æ–µ

#### 2. –†–∞–∑—É–º (Tests)
- **TestsList** ‚Äî —Å–ø–∏—Å–æ–∫ 13+ —Ç–µ—Å—Ç–æ–≤
- **TestScreen** ‚Äî –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞
  - –í–æ–ø—Ä–æ—Å—ã —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–æ–≤
  - –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
  - –†–µ–∑—É–ª—å—Ç–∞—Ç —Å –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–µ–π
- **ChatBot** ‚Äî AI-–ø–æ–º–æ—â–Ω–∏–∫ (—Ç–æ–ª—å–∫–æ –∑–¥–µ—Å—å!)
  - Floating button –≤–Ω–∏–∑—É —Å–ø—Ä–∞–≤–∞
  - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —á–∞—Ç–∞
  - API: Cloudflare Worker

#### 3. –ü—Ä–∞–∫—Ç–∏–∫–∏ (Relax)
- **RelaxHome** ‚Äî —Å–ø–∏—Å–æ–∫ –ø—Ä–∞–∫—Ç–∏–∫
- **BreathingExercise** ‚Äî –¥—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
  - 4-7-8, –ë–æ–∫—Å-–¥—ã—Ö–∞–Ω–∏–µ, –£—Å–ø–æ–∫–∞–∏–≤–∞—é—â–µ–µ
  - –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫—Ä—É–≥
  - –í–∏–±—Ä–∞—Ü–∏—è –Ω–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö
- **MoodDiary** ‚Äî –¥–Ω–µ–≤–Ω–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
  - –í—ã–±–æ—Ä —ç–º–æ–¥–∑–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
  - –ó–∞–º–µ—Ç–∫–∞
  - –ò—Å—Ç–æ—Ä–∏—è –ø–æ –¥–Ω—è–º

#### 4. –ü—Ä–æ—Ñ–∏–ª—å
- **Profile** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –¥–∞–Ω–Ω—ã–µ
- **Progress** ‚Äî –≥—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- **History** ‚Äî –∏—Å—Ç–æ—Ä–∏—è —Ç–µ—Å—Ç–æ–≤
- **Auth** ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (Supabase)

---

## API Endpoints

### Cloudflare Worker
Base URL: `https://patient-lab-742e.rskiff-defi.workers.dev`

#### POST /chat
```json
{
  "messages": [
    {"role": "user", "content": "–ü—Ä–∏–≤–µ—Ç"}
  ]
}
```

#### POST /analyze-food
```json
{
  "image": "base64_encoded_image",
  "description": "optional description"
}
```
Response:
```json
{
  "foods": [
    {
      "name": "–ë–æ—Ä—â",
      "portion": "300–≥",
      "calories": 150,
      "protein": 8,
      "fat": 5,
      "carbs": 18
    }
  ],
  "totalCalories": 150,
  "totalProtein": 8,
  "totalFat": 5,
  "totalCarbs": 18
}
```

### Supabase
- URL: –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- Auth: email/password
- –¢–∞–±–ª–∏—Ü—ã: nutrition_entries, test_results, mood_entries

---

## –î–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤

### –°–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–æ–≤ (testConfigs)
```typescript
const tests = [
  // –ö–ª–∏–Ω–∏—á–µ—Å–∫–∏–µ
  { id: 'phq9', name: 'PHQ-9', icon: 'üòî', questions: 9, category: 'clinical' },
  { id: 'gad7', name: 'GAD-7', icon: 'üò∞', questions: 7, category: 'clinical' },
  { id: 'bdi2', name: 'BDI-II', icon: 'üìä', questions: 21, category: 'clinical' },

  // –õ–∏—á–Ω–æ—Å—Ç—å
  { id: 'mbti', name: 'MBTI', icon: 'üé≠', questions: 20, category: 'personality' },
  { id: 'big5', name: 'Big Five', icon: '‚≠ê', questions: 25, category: 'personality' },
  { id: 'rorschach', name: '–†–æ—Ä—à–∞—Ö', icon: 'ü¶ã', questions: 10, category: 'personality' },

  // –ö–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–µ
  { id: 'iq', name: 'IQ —Ç–µ—Å—Ç', icon: 'üß©', questions: 15, category: 'cognitive' },
  { id: 'eq', name: 'EQ —Ç–µ—Å—Ç', icon: '‚ù§Ô∏è', questions: 20, category: 'cognitive' },

  // –ë–ª–∞–≥–æ–ø–æ–ª—É—á–∏–µ
  { id: 'rosenberg', name: '–°–∞–º–æ–æ—Ü–µ–Ω–∫–∞', icon: 'üí™', questions: 10, category: 'wellbeing' },
  { id: 'pss', name: '–°—Ç—Ä–µ—Å—Å PSS', icon: 'üò§', questions: 10, category: 'wellbeing' },
  { id: 'who5', name: 'WHO-5', icon: 'üòä', questions: 5, category: 'wellbeing' },
]
```

---

## –§–æ—Ä–º—É–ª–∞ –ö–ë–ñ–£ (Mifflin-St Jeor)

```typescript
// BMR (–±–∞–∑–æ–≤—ã–π –º–µ—Ç–∞–±–æ–ª–∏–∑–º)
const bmr = gender === 'male'
  ? 10 * weight + 6.25 * height - 5 * age + 5
  : 10 * weight + 6.25 * height - 5 * age - 161

// –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
const activityMultipliers = {
  sedentary: 1.2,      // –°–∏–¥—è—á–∏–π
  light: 1.375,        // –õ—ë–≥–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
  moderate: 1.55,      // –£–º–µ—Ä–µ–Ω–Ω–∞—è
  active: 1.725,       // –í—ã—Å–æ–∫–∞—è
  veryActive: 1.9      // –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è
}

// –ö–∞–ª–æ—Ä–∏–∏ —Å —É—á—ë—Ç–æ–º —Ü–µ–ª–∏
const goalMultipliers = {
  lose: 0.8,           // –ü–æ—Ö—É–¥–µ–Ω–∏–µ -20%
  maintain: 1.0,       // –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ
  gain: 1.15           // –ù–∞–±–æ—Ä +15%
}

// –ë–ñ–£
const protein = weight * 2        // 2–≥ –Ω–∞ –∫–≥
const fat = calories * 0.25 / 9   // 25% –∫–∞–ª–æ—Ä–∏–π
const carbs = (calories - protein * 4 - fat * 9) / 4
```

---

## –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### AsyncStorage (–ª–æ–∫–∞–ª—å–Ω–æ)
```typescript
// –ö–ª—é—á–∏
'@kbju_profile'      // –ü—Ä–æ—Ñ–∏–ª—å –ö–ë–ñ–£
'@food_entries'      // –ó–∞–ø–∏—Å–∏ –ø–∏—Ç–∞–Ω–∏—è
'@test_results'      // –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
'@mood_entries'      // –î–Ω–µ–≤–Ω–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
'@favorite_recipes'  // –ò–∑–±—Ä–∞–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã
'@user_settings'     // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
```

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### Expo/React Native
```bash
npx create-expo-app teloirazum-app --template blank-typescript
cd teloirazum-app

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npx expo install expo-camera expo-image-picker expo-haptics
npx expo install @react-navigation/native @react-navigation/bottom-tabs
npx expo install react-native-screens react-native-safe-area-context
npx expo install @supabase/supabase-js
npx expo install react-native-chart-kit react-native-svg
npx expo install @react-native-async-storage/async-storage
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
src/
‚îú‚îÄ‚îÄ screens/
‚îÇ   ‚îú‚îÄ‚îÄ nutrition/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NutritionHome.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ KBJUCalculator.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FoodDiary.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Recipes.tsx
‚îÇ   ‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TestsList.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TestScreen.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ChatBot.tsx
‚îÇ   ‚îú‚îÄ‚îÄ relax/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RelaxHome.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BreathingExercise.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MoodDiary.tsx
‚îÇ   ‚îî‚îÄ‚îÄ profile/
‚îÇ       ‚îú‚îÄ‚îÄ Profile.tsx
‚îÇ       ‚îú‚îÄ‚îÄ Progress.tsx
‚îÇ       ‚îî‚îÄ‚îÄ History.tsx
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ Button.tsx
‚îÇ   ‚îú‚îÄ‚îÄ Card.tsx
‚îÇ   ‚îú‚îÄ‚îÄ ProgressBar.tsx
‚îÇ   ‚îî‚îÄ‚îÄ MacroCircle.tsx
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useNutritionDiary.ts
‚îÇ   ‚îú‚îÄ‚îÄ useTestResults.ts
‚îÇ   ‚îî‚îÄ‚îÄ useMoodDiary.ts
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ api.ts
‚îÇ   ‚îî‚îÄ‚îÄ storage.ts
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ recipes.ts
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îî‚îÄ‚îÄ navigation/
    ‚îî‚îÄ‚îÄ AppNavigator.tsx
```

### app.json (Expo)
```json
{
  "expo": {
    "name": "–¢–µ–ª–æ –∏ –†–∞–∑—É–º",
    "slug": "teloirazum",
    "version": "1.0.0",
    "orientation": "portrait",
    "icon": "./assets/icon.png",
    "splash": {
      "image": "./assets/splash.png",
      "resizeMode": "contain",
      "backgroundColor": "#4a6fa5"
    },
    "android": {
      "package": "ru.teloirazum.app",
      "adaptiveIcon": {
        "foregroundImage": "./assets/adaptive-icon.png",
        "backgroundColor": "#4a6fa5"
      },
      "permissions": ["CAMERA", "READ_EXTERNAL_STORAGE"]
    },
    "plugins": [
      "expo-camera",
      "expo-image-picker"
    ]
  }
}
```

---

## –°–±–æ—Ä–∫–∞ APK

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å EAS CLI
npm install -g eas-cli

# –õ–æ–≥–∏–Ω
eas login

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
eas build:configure

# –°–æ–±—Ä–∞—Ç—å APK (preview)
eas build -p android --profile preview

# –ò–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ (—Ç—Ä–µ–±—É–µ—Ç Android SDK)
npx expo run:android --variant release
```

### eas.json
```json
{
  "build": {
    "preview": {
      "android": {
        "buildType": "apk"
      }
    },
    "production": {
      "android": {
        "buildType": "app-bundle"
      }
    }
  }
}
```

---

## –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **–ö–∞–º–µ—Ä–∞**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å expo-image-picker —Å –æ–ø—Ü–∏–µ–π –∫–∞–º–µ—Ä—ã
2. **–í–∏–±—Ä–∞—Ü–∏—è**: expo-haptics –¥–ª—è –¥—ã—Ö–∞—Ç–µ–ª—å–Ω—ã—Ö —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
3. **–û—Ñ–ª–∞–π–Ω**: –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ AsyncStorage, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
4. **–¢—ë–º–Ω–∞—è —Ç–µ–º–∞**: –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ useColorScheme()
5. **ChatBot**: —Ç–æ–ª—å–∫–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ Tests, floating button

---

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
2. –†–∞–∑–¥–µ–ª "–†–∞–∑—É–º" (—Ç–µ—Å—Ç—ã) ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
3. –†–∞–∑–¥–µ–ª "–¢–µ–ª–æ" (–ø–∏—Ç–∞–Ω–∏–µ + –∫–∞–º–µ—Ä–∞)
4. –†–∞–∑–¥–µ–ª "–ü—Ä–∞–∫—Ç–∏–∫–∏" (–¥—ã—Ö–∞–Ω–∏–µ + –¥–Ω–µ–≤–Ω–∏–∫)
5. –ü—Ä–æ—Ñ–∏–ª—å –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
6. –ü–æ–ª–∏—Ä–æ–≤–∫–∞ UI –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
7. –°–±–æ—Ä–∫–∞ APK

---

## –ö–æ–Ω—Ç–∞–∫—Ç
Telegram: @romanskiff
